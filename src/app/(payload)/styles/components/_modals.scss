// ============================================
// MODALS & DRAWERS - Component Overrides
// ============================================
//
// Base modal styles are in _payload-overrides.scss
// This file only contains component-specific overrides
//

@import '../variables';
@import '../mixins';

// ============================================
// MODAL CONTAINER
// ============================================

.modal,
.drawer {
  backdrop-filter: blur(8px);
}

// Modal content area
.modal__content,
.drawer__content {
  @include glow-card($admin-accent-primary);
  max-height: 90vh;
  overflow-y: auto;
}

// ============================================
// MODAL HEADER
// ============================================

.modal__header,
.drawer__header,
.doc-drawer__header-content {
  padding: 1.5rem 2rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  
  h1, h2, h3, h4 {
    margin: 0;
    color: $admin-text-primary;
    
    // Remove gradient underlines in modals
    &::after {
      display: none;
    }
  }
}

// ============================================
// MODAL BODY
// ============================================

.modal__body,
.drawer__body {
  padding: 1.5rem 2rem;
  
  p {
    color: $admin-text-secondary;
    line-height: 1.6;
    margin: 0 0 1rem 0;
    
    &:last-child {
      margin-bottom: 0;
    }
  }
}

// ============================================
// MODAL FOOTER & ACTIONS
// ============================================

.modal__footer,
.modal__actions,
.popup__actions {
  display: flex;
  gap: 0.75rem;
  padding: 1rem 2rem;
  border-top: 1px solid rgba(255, 255, 255, 0.05);
  justify-content: flex-end;
  
  button {
    min-width: 120px;
    padding: 0.75rem 3.5rem;
    white-space: nowrap;
  }
}

// ============================================
// CONFIRMATION MODALS (Delete, etc.)
// ============================================

.modal--delete,
.modal--confirm {
  .modal__body {
    padding: 2rem;
  }
  
  .modal__footer {
    justify-content: flex-end;
    
    // Cancel button
    button:first-child {
      @include glow-button($admin-accent-primary);
    }
    
    // Confirm delete button
    button:last-child {
      @include glow-button($admin-accent-error);
    }
  }
}

// ============================================
// DOC DRAWER (Edit side panel)
// ============================================

.doc-drawer {
  width: 1200px; // Much wider for forms
  max-width: 95vw;
}

.doc-drawer__header-content {
  padding: 1.5rem 2rem;
}

.doc-drawer__content {
  padding: 0 2rem 2rem;
  overflow-y: auto;
  max-height: calc(100vh - 80px); // Prevent double scrollbars
}

// Fix nested scrollbars in relationship drawers
.drawer__content {
  overflow: visible; // Let the inner content handle scrolling
}

.drawer .doc-drawer__content {
  overflow-y: auto; // Only scroll the content area
}

// Make form fields use full drawer width
.drawer {
  // Force all form containers to full width
  .render-fields,
  .form-fields,
  form {
    width: 100% !important;
    max-width: 100% !important;
  }

  // Payload's field wrapper
  .field-type {
    width: 100% !important;
    max-width: 100% !important;
    
    // Inner containers
    > div {
      width: 100% !important;
      max-width: 100% !important;
    }
  }

  // All input wrappers
  .input-wrapper,
  .text-input,
  .textarea-wrapper {
    width: 100% !important;
    max-width: 100% !important;
  }

  // Make text inputs and textareas stretch
  input[type="text"],
  input[type="email"],
  input[type="url"],
  input[type="number"],
  textarea,
  select {
    width: 100% !important;
  }

  // Field spacing
  .field-type + .field-type {
    margin-top: $spacing-lg;
  }

  // Remove max-width constraints on field containers
  .field-type,
  .field-type > div,
  .field-type .input,
  .render-fields > div {
    max-width: none !important;
  }
}

// ============================================
// POPUP (Select dropdowns, etc.)
// ============================================

.popup {
  @include glow-card($admin-accent-info);
  z-index: 100;
}

.popup__scroll {
  max-height: 400px;
  overflow-y: auto;
}

.popup__list {
  padding: 0.5rem;
}

.popup__list-item {
  padding: 0.625rem 1rem;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
  
  &:hover {
    background: rgba($admin-accent-info, 0.1);
  }
}

.popup__list-item--selected {
  background: rgba($admin-accent-info, 0.15);
  color: $admin-accent-info;
  font-weight: 500;
}

// ============================================
// RESPONSIVE ADJUSTMENTS
// ============================================

@media (max-width: 768px) {
  .modal__content,
  .drawer__content {
    max-width: 95vw;
    max-height: 95vh;
  }
  
  .modal__header,
  .modal__body,
  .modal__footer,
  .drawer__header,
  .drawer__body {
    padding-left: 1rem;
    padding-right: 1rem;
  }
  
  .doc-drawer {
    width: 100vw;
    max-width: 100vw;
  }
}
