// ============================================
// BUTTONS - Single Source of Truth
// ============================================
//
// ALL button styling should be defined here:
//   - Color variants (semantic + tier-based)
//   - Size variants
//   - Icon-only buttons
//   - Loading states
//   - Special case buttons (close, array add, etc.)
//
// Do NOT add button styles elsewhere!
//

@import '../variables';
@import '../mixins';

// ============================================
// COLOR VARIANTS - Semantic
// ============================================

.btn-primary,
button.btn-primary {
  @include glow-button($admin-accent-primary); // Purple
}

.btn-info,
button.btn-info {
  @include glow-button($admin-accent-info); // Cyan
}

.btn-success,
button.btn-success {
  @include glow-button($admin-accent-success); // Green
}

.btn-warning,
button.btn-warning {
  @include glow-button($admin-accent-warning); // Orange
}

.btn-error,
button.btn-error,
button[class*="delete"],
button[class*="remove"] {
  @include glow-button($admin-accent-error); // Red
}

// ============================================
// COLOR VARIANTS - Tier-Based
// ============================================

.btn-masters,
button.btn-masters {
  @include glow-button($tier-masters); // Pink
}

.btn-expert,
button.btn-expert {
  @include glow-button($tier-expert); // Purple/Violet
}

.btn-advanced,
button.btn-advanced {
  @include glow-button($tier-advanced); // Blue
}

.btn-4k,
button.btn-4k {
  @include glow-button($tier-4k); // Emerald
}

.btn-35k,
button.btn-35k {
  @include glow-button($tier-35k); // Yellow
}

.btn-30k,
button.btn-30k {
  @include glow-button($tier-30k); // Lime
}

.btn-below,
button.btn-below {
  @include glow-button($tier-below); // Gray
}

// ============================================
// SIZE VARIANTS
// ============================================

.btn--sm,
button.btn--sm,
.btn--size-small,
button.btn--size-small {
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
  min-height: 36px;
  width: auto;
  max-width: none;
}

.btn--md,
button.btn--md,
.btn--size-medium,
button.btn--size-medium {
  padding: 0.75rem 1.5rem;
  font-size: 0.9375rem;
  min-height: 40px;
  width: auto;
  max-width: none;
}

.btn--lg,
button.btn--lg,
.btn--size-large,
button.btn--size-large {
  padding: 1rem 2rem;
  font-size: 1rem;
  min-height: 48px;
  width: auto;
  max-width: none;
}

// ============================================
// ICON-STYLE BUTTONS (PayloadCMS)
// ============================================

// Buttons with icon-style classes should still fit their content
.btn--icon-style-without-border,
.btn--icon-style-with-border,
.btn--style-primary,
.btn--style-secondary,
.btn--withoutPopup,
button.btn--icon-style-without-border,
button.btn--icon-style-with-border,
button.btn--style-primary,
button.btn--style-secondary,
button.btn--withoutPopup {
  width: auto;
  min-width: fit-content;
  max-width: none;
  overflow: visible;
  white-space: nowrap;
  flex-shrink: 0;
  
  // Ensure inner elements don't truncate
  .btn__content,
  .btn__label {
    overflow: visible;
    text-overflow: clip;
    white-space: nowrap;
    width: auto;
  }
}

// ============================================
// ICON-ONLY BUTTONS
// ============================================

// Small square buttons for field controls
button[class*="remove"]:not(.array-field__add-row):not([class*="multi-value"]),
button[class*="clear"]:not(.array-field__add-row),
button[class*="toggle"]:not(.array-field__add-row),
button[class*="expand"]:not(.array-field__add-row),
.field-type button[aria-label]:not([type="submit"]):not(.array-field__add-row) {
  padding: 0.5rem;
  min-width: 32px;
  min-height: 32px;
  
  svg {
    width: 16px;
    height: 16px;
  }
}

// ============================================
// CLOSE BUTTONS (Modals/Drawers)
// Example: Click 'Add Manager' on any team edit page
// ============================================

.drawer__header-close,
.doc-drawer__header-close, // Payload-specific
.modal__close,
button[aria-label="Close"]:not(.nav__mobile-close) {
  @include glow-button($admin-accent-error);
  width: 2.25rem !important;
  height: 2.25rem !important;
  min-width: 2.25rem !important;
  padding: 0 !important;
  border-radius: 50% !important; // Circular - needs !important to override Payload
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  
  svg {
    width: 16px;
    height: 16px;
  }
  
  &:hover:not(:disabled) {
    transform: none;
    box-shadow: 0 0 20px rgba($admin-accent-error, 0.5) !important; // Stronger glow
    background: rgba($admin-accent-error, 0.2) !important;
  }
  
  &:active:not(:disabled) {
    transform: scale(0.95);
  }
}

// ============================================
// ARRAY/BLOCKS FIELD ADD BUTTONS
// ============================================

// "Add Item", "Add Custom Link", etc. buttons
.array-field__add-row,
.blocks-field__add-row,
button[class*="add-row"],
button[class*="array"][class*="add"],
button[class*="blocks"][class*="add"] {
  @include glow-button($admin-accent-success);
  padding: 0.75rem 1.5rem;
  min-height: 40px;
  width: auto;
  white-space: nowrap;
  
  svg {
    width: 16px;
    height: 16px;
  }
}

// ============================================
// BUTTON GROUPS
// ============================================

.btn-group {
  display: flex;
  gap: 0.75rem;
  align-items: center;
  
  &--compact {
    gap: 0.5rem;
  }
  
  &--justified {
    width: 100%;
    
    button {
      flex: 1;
    }
  }
}

// ============================================
// LOADING STATE
// ============================================

.btn--loading,
button.btn--loading,
button[data-loading="true"] {
  position: relative;
  color: transparent;
  pointer-events: none;
  
  &::after {
    content: '';
    position: absolute;
    width: 18px;
    height: 18px;
    top: 50%;
    left: 50%;
    margin-left: -9px;
    margin-top: -9px;
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    border-top-color: white;
    animation: spinner 0.6s linear infinite;
  }
}

@keyframes spinner {
  to {
    transform: rotate(360deg);
  }
}

// ============================================
// ICON POSITIONING
// ============================================

// Icon before text
.btn--icon-left {
  flex-direction: row;
  
  svg {
    margin-right: 0.5rem;
  }
}

// Icon after text
.btn--icon-right {
  flex-direction: row-reverse;
  
  svg {
    margin-left: 0.5rem;
  }
}

// Icon only (no text)
.btn--icon-only {
  padding: 0.75rem;
  
  svg {
    margin: 0;
  }
}

// ============================================
// SPECIAL PAYLOAD BUTTONS
// ============================================

// Tab buttons in document headers
.doc-header button,
.doc-tabs button {
  border-radius: 6px 6px 0 0;
}

// Form submit buttons - handled by _payload-overrides.scss
// DO NOT DUPLICATE HERE

// Delete buttons in doc controls
.doc-controls button[class*="delete"],
.doc-controls button[class*="remove"] {
  @include glow-button($admin-accent-error);
}

// ============================================
// POPUP/MORE ACTIONS BUTTON (...)
// ============================================

// Fix double border on "..." menu button in doc controls
.popup-button,
button.popup-button,
.doc-controls button.popup-button {
  // Single clean border - remove doubles
  border: 1px solid rgba($admin-accent-primary, 0.7) !important;
  box-shadow: 0 0 12px rgba($admin-accent-primary, 0.15) !important;
  
  // Remove nested borders from any child elements
  *,
  &::before,
  &::after {
    border: none !important;
    box-shadow: none !important;
  }
  
  &:hover:not(:disabled) {
    border-color: rgba($admin-accent-primary, 0.9) !important;
    box-shadow: 0 0 20px rgba($admin-accent-primary, 0.3) !important;
  }
}

// ============================================
// RESPONSIVE ADJUSTMENTS
// ============================================

@media (max-width: 768px) {
  // Make buttons slightly smaller on mobile
  button,
  .btn {
    padding: 0.625rem 1.25rem;
    font-size: 0.875rem;
  }
  
  // Icon buttons stay the same
  button[class*="remove"],
  button[class*="clear"],
  button[class*="toggle"],
  button[class*="expand"] {
    padding: 0.5rem;
  }
  
  // Button groups stack on mobile
  .btn-group:not(.btn-group--no-wrap) {
    flex-direction: column;
    width: 100%;
    
    button {
      width: 100%;
    }
  }
}

// ============================================
// ADMIN UTILITY BUTTONS (moved from _base.scss)
// ============================================

.admin-button {
  @include glow-button($admin-accent-primary);
}

.admin-button--action {
  @include glow-button($admin-accent-success);
}

.admin-button--danger {
  @include glow-button($admin-accent-error);
}

.admin-button--info {
  @include glow-button($admin-accent-info);
}

.admin-button--warning {
  @include glow-button($admin-accent-warning);
}
