// ============================================
// PAYLOAD CMS OVERRIDES - Clean Glow Foundation
// ============================================
//
// This file uses PayloadCMS's own selectors to establish Clean Glow
// as the default design system. NO html body hacks, NO !important wars.
//
// Strategy: Target Payload's classes directly with proper specificity
//

@import './variables';
@import './mixins';

// ============================================
// BUTTONS - Clean Glow as Default
// ============================================

// All PayloadCMS buttons get Clean Glow by default
.btn,
button[class*="btn"],
.popup__actions button,
.form-submit button,
.doc-controls button,
.form__submit button {
  @include glow-button($admin-accent-primary);
  
  // Base button structure
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  font-weight: 500;
  font-size: 0.9375rem;
  letter-spacing: 0.025em;
  white-space: nowrap;
  cursor: pointer;
  
  // Ensure buttons can fit their content
  width: auto;
  min-width: fit-content;
  max-width: none;
  overflow: visible;
  
  // Remove all inner element styling
  .btn__content,
  .btn__label,
  span {
    border: none;
    box-shadow: none;
    background: transparent;
    border-radius: 0;
    overflow: visible;
    text-overflow: clip;
  }
}

// --------------------------------------------
// BUTTON COLOR VARIANTS - Semantic
// --------------------------------------------

.btn-primary,
button.btn-primary {
  @include glow-button($admin-accent-primary); // Purple
}

.btn-info,
button.btn-info {
  @include glow-button($admin-accent-info); // Cyan
}

.btn-success,
button.btn-success {
  @include glow-button($admin-accent-success); // Green
}

.btn-warning,
button.btn-warning {
  @include glow-button($admin-accent-warning); // Orange
}

.btn-error,
button.btn-error,
button[class*="delete"],
button[class*="remove"] {
  @include glow-button($admin-accent-error); // Red
}

// --------------------------------------------
// BUTTON COLOR VARIANTS - Tier-Based
// --------------------------------------------

.btn-masters,
button.btn-masters {
  @include glow-button($tier-masters); // Pink
}

.btn-expert,
button.btn-expert {
  @include glow-button($tier-expert); // Purple/Violet
}

.btn-advanced,
button.btn-advanced {
  @include glow-button($tier-advanced); // Blue
}

.btn-4k,
button.btn-4k {
  @include glow-button($tier-4k); // Emerald
}

.btn-35k,
button.btn-35k {
  @include glow-button($tier-35k); // Yellow
}

.btn-30k,
button.btn-30k {
  @include glow-button($tier-30k); // Lime
}

.btn-below,
button.btn-below {
  @include glow-button($tier-below); // Gray
}

// --------------------------------------------
// BUTTON SIZE VARIANTS
// --------------------------------------------

.btn--sm,
button.btn--sm {
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
}

.btn--lg,
button.btn--lg {
  padding: 1rem 2rem;
  font-size: 1rem;
}

// ============================================
// FORMS & INPUTS - Clean Glow as Default
// ============================================

// Text inputs
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="tel"],
input[type="url"],
input[type="search"],
textarea,
.input {
  @include glow-input($admin-accent-primary);
}

// Select dropdowns
select,
.select__control {
  @include glow-select($admin-accent-info);
}

// React Select (PayloadCMS uses this heavily)
.rs__control {
  @include transparent-bg(0.03);
  border: 1px solid rgba($admin-accent-info, 0.3);
  border-radius: 6px;
  box-shadow: 0 0 8px rgba($admin-accent-info, 0.08);
  transition: all 0.2s ease;
  
  &:hover {
    border-color: rgba($admin-accent-info, 0.5);
    box-shadow: 0 0 12px rgba($admin-accent-info, 0.12);
  }
  
  &--is-focused {
    background: rgba($admin-accent-info, 0.05);
    border-color: rgba($admin-accent-info, 0.7);
    box-shadow: 0 0 0 3px rgba($admin-accent-info, 0.15);
  }
}

// React Select multi-value tags
.rs__multi-value {
  @include glow-badge($admin-accent-info);
  @include glow-accent-bar($admin-accent-info, 2px, 60%);
  padding-left: 0.75rem;
}

.rs__multi-value__label {
  background: transparent;
  border: none;
  color: rgba(255, 255, 255, 0.9);
}

.rs__multi-value__remove {
  background: transparent;
  border: none;
  color: rgba(255, 255, 255, 0.5);
  transition: all 0.2s ease;
  
  &:hover {
    background: rgba($admin-accent-info, 0.2);
    color: $admin-accent-info;
  }
}

// Checkboxes and radios
input[type="checkbox"] {
  @include glow-checkbox($admin-accent-success, 18px);
  margin: 0;
  vertical-align: middle;
}

input[type="radio"] {
  @include glow-radio($admin-accent-success, 18px);
  margin: 0;
  vertical-align: middle;
}

// Checkbox/radio labels
label:has(input[type="checkbox"]),
label:has(input[type="radio"]) {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  user-select: none;
  margin: 0;
  padding: 0;
  line-height: 1;
  
  input[type="checkbox"],
  input[type="radio"] {
    margin: 0;
    flex-shrink: 0;
  }
  
  &:hover {
    color: rgba(255, 255, 255, 0.95);
  }
}

// ============================================
// BADGES & PILLS - Clean Glow as Default
// ============================================

.badge,
.pill,
.tag,
[class*="badge"],
[class*="pill"] {
  @include glow-badge($admin-accent-primary);
  padding: 0.25rem 0.75rem;
  font-size: 0.875rem;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
}

// Badge color variants
.badge-info {
  @include glow-badge($admin-accent-info);
}

.badge-success {
  @include glow-badge($admin-accent-success);
}

.badge-warning {
  @include glow-badge($admin-accent-warning);
}

.badge-error {
  @include glow-badge($admin-accent-error);
}

// Tier-based badge variants
.badge-masters {
  @include glow-badge($tier-masters);
}

.badge-expert {
  @include glow-badge($tier-expert);
}

.badge-advanced {
  @include glow-badge($tier-advanced);
}

.badge-4k {
  @include glow-badge($tier-4k);
}

// ============================================
// CARDS - Clean Glow as Default
// ============================================

.card,
[class*="card__"] {
  @include glow-card($admin-accent-primary);
  padding: 1.5rem;
}

// Card color variants
.card-info {
  @include glow-card($admin-accent-info);
}

.card-success {
  @include glow-card($admin-accent-success);
}

.card-warning {
  @include glow-card($admin-accent-warning);
}

.card-error {
  @include glow-card($admin-accent-error);
}

// ============================================
// MODALS & POPUPS
// ============================================

.modal,
.popup,
.drawer {
  backdrop-filter: blur(8px);
}

// Modal content
.modal__content,
.popup__content,
.drawer__content {
  @include glow-card($admin-accent-primary);
}

// Modal footer buttons
.modal__footer button,
.popup__actions button {
  padding: 0.75rem 3.5rem;
  min-width: auto;
}

// ============================================
// TABLES
// ============================================

// Ensure table containers can scroll horizontally
[class*="Table"],
[class*="table"],
.collection-list,
.list-view {
  overflow-x: auto;
  overflow-y: visible;
  width: 100%;
  
  // Smooth scrolling
  -webkit-overflow-scrolling: touch;
  
  // Custom scrollbar
  @include custom-scrollbar;
}

table {
  width: 100%;
  min-width: max-content; // Prevent table from shrinking below content width
  
  thead {
    @include transparent-bg(0.05);
    border-bottom: 2px solid rgba($admin-accent-primary, 0.3);
    
    th {
      color: rgba(255, 255, 255, 0.85);
      font-weight: 600;
      padding: 1rem;
    }
  }
  
  tbody {
    tr {
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      transition: all 0.2s ease;
      
      &:hover {
        @include transparent-bg(0.03);
      }
    }
    
    td {
      padding: 0.875rem 1rem;
    }
  }
}

// ============================================
// LIST CONTROLS (Filters, Search, etc.)
// ============================================

.list-controls {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  
  button {
    @include glow-button($admin-accent-info);
    padding: 0.625rem 1rem;
    font-size: 0.875rem;
  }
  
  .list-controls__toggle-columns {
    @include glow-button($admin-accent-info); // Cyan
    padding: 0.875rem 1.5rem;
    min-height: 48px;
    font-size: 1rem;
    font-weight: 600;
  }
  
  .list-controls__toggle-filters,
  .list-controls__toggle-where {
    @include glow-button($admin-accent-success); // Green
    padding: 0.875rem 1.5rem;
    min-height: 48px;
    font-size: 1rem;
    font-weight: 600;
  }
  
  // Checkbox alignment in list controls (Show Archived, etc.)
  label:has(input[type="checkbox"]) {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    min-height: 44px; // Match button height
    padding: 0.625rem 1rem;
    margin: 0;
    line-height: 1;
    
    input[type="checkbox"] {
      margin: 0;
      flex-shrink: 0;
    }
  }
}

// ============================================
// NAVIGATION
// ============================================

.nav {
  .nav__link {
    transition: all 0.2s ease;
    border-left: 3px solid transparent;
    
    &:hover {
      @include transparent-bg(0.05);
      border-left-color: rgba($admin-accent-primary, 0.5);
    }
    
    &--active,
    &[aria-current="page"] {
      @include transparent-bg(0.08);
      border-left-color: $admin-accent-primary;
      box-shadow: 0 0 15px rgba($admin-accent-primary, 0.2);
    }
  }
}

// ============================================
// COLLECTION LIST HEADERS
// ============================================

.collection-list__header {
  // "Create New" buttons
  button,
  a[href*="create"] {
    @include glow-button-tier-expert; // Purple/Indigo theme
  }
}

// Empty state "Create First" buttons
.collection-list__no-results {
  button,
  a.btn {
    @include glow-button-tier-35k; // Emerald green theme
  }
}

// ============================================
// DOCUMENT EDIT CONTROLS
// ============================================

.doc-controls {
  button[type="submit"],
  .form-submit button {
    @include glow-button($admin-accent-success); // Green for save
  }
  
  button[class*="delete"],
  button[class*="remove"] {
    @include glow-button($admin-accent-error); // Red for delete
  }
}

// ============================================
// TOASTS & NOTIFICATIONS
// ============================================

.toast,
.notification {
  @include glow-card($admin-accent-info);
}

.toast--success,
.notification--success,
.toast.success,
.notification.success {
  @include glow-card($admin-accent-success);
}

.toast--error,
.notification--error,
.toast.error,
.notification.error {
  @include glow-card($admin-accent-error);
}

.toast--warning,
.notification--warning,
.toast.warning,
.notification.warning {
  @include glow-card($admin-accent-warning);
}

// ============================================
// FIELD GROUPS & SECTIONS
// ============================================

// Field groups (collapsible sections in forms)
.field-group,
.collapsible {
  @include transparent-bg(0.02);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  padding: 1rem;
  margin-bottom: 1rem;
  
  &__header {
    @include transparent-bg(0.03);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    padding: 0.75rem 1rem;
    margin: -1rem -1rem 1rem -1rem;
    border-radius: 8px 8px 0 0;
    cursor: pointer;
    transition: all 0.2s ease;
    
    &:hover {
      @include transparent-bg(0.05);
    }
  }
  
  &__label {
    font-weight: 600;
    color: rgba(255, 255, 255, 0.9);
  }
}

// Tabs (for collection edit views)
.tabs,
.tabs-field {
  .tabs__nav {
    display: flex;
    gap: 0.5rem;
    border-bottom: 2px solid rgba(255, 255, 255, 0.05);
    margin-bottom: 1.5rem;
    
    button {
      @include transparent-bg(0.02);
      border: 1px solid transparent;
      border-bottom: none;
      border-radius: 8px 8px 0 0;
      padding: 0.75rem 1.5rem;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.7);
      transition: all 0.2s ease;
      
      &:hover {
        @include transparent-bg(0.05);
        color: rgba(255, 255, 255, 0.9);
      }
      
      &[aria-selected="true"],
      &.active {
        @include transparent-bg(0.08);
        border-color: rgba($admin-accent-primary, 0.5);
        color: rgba(255, 255, 255, 1);
        box-shadow: 0 0 12px rgba($admin-accent-primary, 0.15);
      }
    }
  }
}

// Array fields (repeaters)
.array-field,
.blocks-field {
  .array-field__row,
  .blocks-field__row {
    @include glow-card($admin-accent-primary);
    margin-bottom: 1rem;
    padding: 1.5rem;
    
    &:hover {
      transform: translateY(-1px);
    }
  }
  
  .array-field__add-button,
  .blocks-field__add-button,
  button[class*="add-row"] {
    @include glow-button($admin-accent-success);
    width: 100%;
    justify-content: center;
    margin-top: 0.75rem;
  }
  
  .array-field__remove-button,
  .blocks-field__remove-button,
  button[class*="remove-row"] {
    @include glow-button($admin-accent-error);
    padding: 0.5rem;
    min-width: auto;
  }
}

// Relationship fields
.relationship-field,
.upload-field {
  .relationship__value,
  .upload__value {
    @include glow-badge($admin-accent-info);
    display: inline-flex;
    padding: 0.5rem 1rem;
    margin: 0.25rem;
  }
}

// Rich text editor
.rich-text-field,
.lexical-editor {
  .rich-text__toolbar {
    @include transparent-bg(0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px 8px 0 0;
    padding: 0.5rem;
    
    button {
      @include transparent-bg(0.03);
      border: 1px solid transparent;
      border-radius: 4px;
      padding: 0.5rem;
      margin: 0.125rem;
      transition: all 0.2s ease;
      
      &:hover {
        @include transparent-bg(0.08);
        border-color: rgba($admin-accent-primary, 0.3);
      }
      
      &.active {
        @include transparent-bg(0.1);
        border-color: rgba($admin-accent-primary, 0.5);
        box-shadow: 0 0 8px rgba($admin-accent-primary, 0.2);
      }
    }
  }
  
  .rich-text__content {
    @include glow-input($admin-accent-primary);
    min-height: 200px;
    padding: 1rem;
  }
}

// Date picker
.date-time-picker {
  input {
    @include glow-input($admin-accent-info);
  }
  
  .date-time-picker__icon-wrap {
    color: rgba($admin-accent-info, 0.7);
  }
  
  .date-time-picker__clear-button {
    color: rgba($admin-accent-error, 0.7);
    transition: all 0.2s ease;
    
    &:hover {
      color: $admin-accent-error;
    }
  }
}

// Upload field (file/image uploads)
.file-field,
.upload {
  .file-field__upload,
  .upload__dropzone {
    @include glow-card($admin-accent-info);
    border: 2px dashed rgba($admin-accent-info, 0.3);
    padding: 2rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s ease;
    
    &:hover {
      border-color: rgba($admin-accent-info, 0.6);
      background: rgba($admin-accent-info, 0.05);
    }
  }
  
  .file-field__preview,
  .upload__preview {
    @include glow-card($admin-accent-primary);
    padding: 1rem;
    margin-top: 1rem;
  }
}

// ============================================
// PAGINATION
// ============================================

.pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  margin-top: 2rem;
  
  button,
  a {
    @include glow-button($admin-accent-primary);
    padding: 0.5rem 1rem;
    min-width: 44px;
    
    &:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    
    &.active,
    &[aria-current="page"] {
      @include glow-button($admin-accent-info);
      box-shadow: 0 0 15px rgba($admin-accent-info, 0.3);
    }
  }
  
  .pagination__page-count {
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.875rem;
    margin: 0 0.5rem;
  }
}

// ============================================
// LOADING STATES
// ============================================

.loading,
.spinner,
[class*="loading"] {
  display: inline-block;
  
  &::after {
    content: '';
    display: inline-block;
    width: 1rem;
    height: 1rem;
    border: 2px solid rgba($admin-accent-primary, 0.3);
    border-top-color: $admin-accent-primary;
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
  }
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

// ============================================
// ERROR STATES
// ============================================

.error,
.field-error,
.validation-error,
[class*="error-message"] {
  @include glow-badge($admin-accent-error);
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  margin-top: 0.5rem;
  font-size: 0.875rem;
  
  &::before {
    content: 'âš ';
    font-size: 1rem;
  }
}

// Field with error state
.field--error,
.field.has-error,
input.error,
textarea.error,
select.error {
  border-color: rgba($admin-accent-error, 0.6);
  box-shadow: 0 0 12px rgba($admin-accent-error, 0.2);
  
  &:focus {
    border-color: rgba($admin-accent-error, 0.8);
    box-shadow: 0 0 0 3px rgba($admin-accent-error, 0.2);
  }
}

// ============================================
// EMPTY STATES
// ============================================

.empty-state,
.no-results,
[class*="empty"] {
  @include transparent-bg(0.03);
  border: 2px dashed rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 3rem 2rem;
  text-align: center;
  color: rgba(255, 255, 255, 0.6);
  
  h3,
  .empty-state__title {
    color: rgba(255, 255, 255, 0.8);
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }
  
  p,
  .empty-state__description {
    font-size: 0.9375rem;
    margin-bottom: 1.5rem;
  }
  
  button,
  a.btn {
    @include glow-button($admin-accent-success);
  }
}

// ============================================
// UTILITY CLASSES
// ============================================

// Hide utility
.hidden {
  display: none !important;
}

// Visually hidden but accessible
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

